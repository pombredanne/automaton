{% extends "base.html" %}
{% block content %}

<script type=text/javascript>
	$('#_switch').live('pageinit',function(event){
		$('[data-role="slider"]').on('slidestop', function(evt){
			var sliderObject = $(evt.target);
			$.ajax({ url: '/_switch', type: 'POST', data: { id: sliderObject.prop('id'), val: sliderObject.val() }, success: function(data){ }, error: function(){ } });
		});
	});
</script>

<div data-role="page" id="_switch" data-theme='a'>
	<div data-role="header">
		<a href="/" data-icon="home" data-iconpos="notext">Home</a>
		<h1>{{ device.location }}</h1>
		<a href="#main" data-rel="back" data-icon="back" data-iconpos="notext">Back</a>
	</div>
	<div data-role="content">
		<label for="_switch_{{ device.node }}">{{ device.name }}</label>
		<select name="_switch_{{ device.node }}" id="_switch_{{ device.node }}" data-role="slider">
			<option value="off" {% if not device.on %}selected{% endif %}>Off</option>
			<option value="on" {% if device.on %}selected{% endif %}>On</option>
		</select> 
	</div>
</div>
{% endblock %} 
